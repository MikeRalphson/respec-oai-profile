{"version":3,"sources":["../../../src/w3c/templates/show-people.js"],"names":["conf","name","items","html","hyperHTML","results","i","length","push","getItem","p","personName","editorid","w3cid","parseInt","dd","span","document","createDocumentFragment","contents","mailto","url","company","companyURL","note","createTextNode","extras","filter","extra","trim","map","getExtra","result","bind","appendChild","class","textContainer","href","textContent"],"mappings":";;;;;;;oBAAe,CAACA,IAAD,EAAOC,IAAP,EAAaC,QAAQ,EAArB,KAA4B;AACzC,UAAMC,OAAOC,SAAb;AACA,UAAMC,UAAU,EAAhB;AACA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,MAAMK,MAA1B,EAAkCD,GAAlC,EAAuC;AACrCD,cAAQG,IAAR,CAAaC,QAAQP,MAAMI,CAAN,CAAR,EAAkBA,CAAlB,CAAb;AACD;AACD,WAAOD,OAAP;;AAEA,aAASI,OAAT,CAAiBC,CAAjB,EAAoBJ,CAApB,EAAuB;AACrB,YAAMK,aAAa,CAACD,EAAET,IAAH,CAAnB,CADqB,CACQ;AAC7B,YAAMW,WAAWF,EAAEG,KAAF,GAAUC,SAASJ,EAAEG,KAAX,EAAkB,EAAlB,CAAV,GAAiC,IAAlD;AACA,YAAME,KAAKZ,IAAK;wBACIS,QAAS,SAD7B;AAEE,YAAMI,OAAOC,SAASC,sBAAT,EAAb;AACF,YAAMC,WAAW,EAAjB;AACA,UAAIT,EAAEU,MAAN,EAAc;AACZD,iBAASX,IAAT,CAAcL,IAAK;gBACR,UAASO,EAAEU,MAAO,EAAE,KAAIT,UAAW,MAD9C;AAED,OAHD,MAGO,IAAID,EAAEW,GAAN,EAAW;AAChBF,iBAASX,IAAT,CAAcL,IAAK;gBACTO,EAAEW,GAAI,KAAIV,UAAW,MAD/B;AAED,OAHM,MAGA;AACLQ,iBAASX,IAAT,CAAcL,IAAK,2BAA0BQ,UAAW,SAAxD;AACD;AACD,UAAID,EAAEY,OAAN,EAAe;AACb,YAAIZ,EAAEa,UAAN,EAAkB;AAChBJ,mBAASX,IAAT,CAAcL,IAAK,6CAA4CO,EAAEa,UAAW,KAAIb,EAAEY,OAAQ,OAA1F;AACD,SAFD,MAEO;AACLH,mBAASX,IAAT,CAAcL,IAAK,KAAIO,EAAEY,OAAQ,GAAjC;AACD;AACF;AACD,UAAIZ,EAAEc,IAAN,EAAYL,SAASX,IAAT,CAAcS,SAASQ,cAAT,CAAyB,KAAIf,EAAEc,IAAK,GAApC,CAAd;AACZ,UAAId,EAAEgB,MAAN,EAAc;AACZ,cAAMrB,UAAUK,EAAEgB;AAChB;AADc,SAEbC,MAFa,CAENC,SAASA,MAAM3B,IAAN,IAAc2B,MAAM3B,IAAN,CAAW4B,IAAX,EAFjB;AAGd;AAHc,SAIbC,GAJa,CAITC,QAJS,CAAhB;AAKA,aAAK,MAAMC,MAAX,IAAqB3B,OAArB,EAA8B;AAC5Bc,mBAASX,IAAT,CAAcS,SAASQ,cAAT,CAAwB,IAAxB,CAAd,EAA6CO,MAA7C;AACD;AACF;AACD5B,gBAAU6B,IAAV,CAAejB,IAAf,CAAqB,GAAEG,QAAS,EAAhC;AACAJ,SAAGmB,WAAH,CAAelB,IAAf;AACA,aAAOD,EAAP;AACD;;AAED,aAASgB,QAAT,CAAkBH,KAAlB,EAAyB;AACvB,YAAMZ,OAAOb,IAAK,gBAAeyB,MAAMO,KAAN,IAAe,IAAK,WAArD;AACA,UAAIC,gBAAgBpB,IAApB;AACA,UAAIY,MAAMS,IAAV,EAAgB;AACdD,wBAAgBjC,IAAK,YAAWyB,MAAMS,IAAK,QAA3C;AACArB,aAAKkB,WAAL,CAAiBE,aAAjB;AACD;AACDA,oBAAcE,WAAd,GAA4BV,MAAM3B,IAAlC;AACA,aAAOe,IAAP;AACD;AACF,G","file":"show-people.js","sourcesContent":["export default (conf, name, items = []) => {\n  const html = hyperHTML;\n  const results = [];\n  for (let i = 0; i < items.length; i++) {\n    results.push(getItem(items[i], i));\n  }\n  return results;\n\n  function getItem(p, i) {\n    const personName = [p.name]; // treated as opt-in HTML by hyperHTML\n    const editorid = p.w3cid ? parseInt(p.w3cid, 10): null;\n    const dd = html`<dd class='p-author h-card vcard'\n      data-editor-id='${editorid}'></dd>`;\n      const span = document.createDocumentFragment();\n    const contents = [];\n    if (p.mailto) {\n      contents.push(html`<a class='ed_mailto u-email email p-name'\n        href='${`mailto:${p.mailto}`}'>${personName}</a>`);\n    } else if (p.url) {\n      contents.push(html`<a class='u-url url p-name fn'\n        href='${p.url}'>${personName}</a>`);\n    } else {\n      contents.push(html`<span class='p-name fn'>${personName}</span>`);\n    }\n    if (p.company) {\n      if (p.companyURL) {\n        contents.push(html` (<a class='p-org org h-org h-card' href='${p.companyURL}'>${p.company}</a>)`);\n      } else {\n        contents.push(html` (${p.company})`);\n      }\n    }\n    if (p.note) contents.push(document.createTextNode(` (${p.note})`));\n    if (p.extras) {\n      const results = p.extras\n        // Remove empty names\n        .filter(extra => extra.name && extra.name.trim())\n        // Convert to HTML\n        .map(getExtra);\n      for (const result of results) {\n        contents.push(document.createTextNode(\", \"), result);\n      }\n    }\n    hyperHTML.bind(span)`${contents}`;\n    dd.appendChild(span);\n    return dd;\n  }\n\n  function getExtra(extra) {\n    const span = html`<span class='${extra.class || null}'></span>`\n    let textContainer = span;\n    if (extra.href) {\n      textContainer = html`<a href='${extra.href}'></a>`;\n      span.appendChild(textContainer);\n    }\n    textContainer.textContent = extra.name;\n    return span;\n  }\n}\n"]}